# Simple Identity Server - Production Environment Variables
# This file contains all environment variables for the production deployment
# 
# SECURITY WARNING: 
# - This file contains sensitive information
# - Ensure proper file permissions (600 or 640)
# - Never commit this file to version control
# - Use secure secret management in production environments

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================

# Strong password for SQL Server SA account
# IMPORTANT: Change this to a secure password before deployment
SIMPLE_IDENTITY_SERVER_DB_PASSWORD=StrongPassword123!

# Custom connection strings (RECOMMENDED - these use the same password as SIMPLE_IDENTITY_SERVER_DB_PASSWORD)
# These override the default connection strings and ensure password consistency
SIMPLE_IDENTITY_SERVER_DEFAULT_CONNECTION_STRING=Server=sqlserver,1433;Database=SimpleIdentityServer;MultipleActiveResultSets=true;uid=sa;pwd=StrongPassword123!;TrustServerCertificate=true;Encrypt=true
SIMPLE_IDENTITY_SERVER_SECURITY_LOGS_CONNECTION_STRING=Server=sqlserver,1433;Database=SimpleIdentityServerSecurityLogs;MultipleActiveResultSets=true;uid=sa;pwd=StrongPassword123!;TrustServerCertificate=true;Encrypt=true

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed origins for CORS (semicolon-separated)
# For development/testing:
SIMPLE_IDENTITY_SERVER_CORS_ALLOWED_ORIGINS=https://identity.dev.test;https://localhost:3000;https://localhost:5001

# For production, replace with your actual domains:
# SIMPLE_IDENTITY_SERVER_CORS_ALLOWED_ORIGINS=https://yourdomain.com;https://app.yourdomain.com;https://admin.yourdomain.com

# =============================================================================
# CERTIFICATE CONFIGURATION
# =============================================================================

# Password for certificate files
# Certificate passwords (REQUIRED for production certificates)
SIMPLE_IDENTITY_SERVER_CERT_PASSWORD=SharedCertPassword123!

# =============================================================================
# ASP.NET CORE CONFIGURATION
# =============================================================================

# Environment name
ASPNETCORE_ENVIRONMENT=Production

# URLs configuration
ASPNETCORE_URLS=https://+:443

# =============================================================================
# LOAD BALANCER CONFIGURATION
# =============================================================================

# Load Balancer Configuration (ASP.NET Core format)
LoadBalancer__EnableForwardedHeaders=true
LoadBalancer__TrustedProxies__0=172.25.0.10
LoadBalancer__ForwardLimit=2
LoadBalancer__RequireHeaderSymmetry=false

# Kestrel Certificate Configuration
Kestrel__Certificates__Default__Path=/app/certs/identity-dev-test.crt
Kestrel__Certificates__Default__KeyPath=/app/certs/identity-dev-test.key

# =============================================================================
# SQL SERVER CONFIGURATION
# =============================================================================

# SQL Server configuration
ACCEPT_EULA=Y
MSSQL_PID=Express
MSSQL_MEMORY_LIMIT_MB=4096
SA_PASSWORD=StrongPassword123!

# =============================================================================
# SECURITY BEST PRACTICES REMINDER
# =============================================================================

# 1. Change SIMPLE_IDENTITY_SERVER_DB_PASSWORD to a strong, unique password (minimum 12 characters)
# 2. Update SIMPLE_IDENTITY_SERVER_CORS_ALLOWED_ORIGINS to only include necessary domains
# 3. Use proper certificate management in production
# 4. Regularly rotate passwords and certificates
# 5. Monitor security logs for suspicious activity
# 6. Consider using external secret management (Azure Key Vault, AWS Secrets Manager)
# 7. Ensure this file has restricted permissions (chmod 600)

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================

# Before deploying to production:
# 1. Update SIMPLE_IDENTITY_SERVER_DB_PASSWORD with a strong password
# 2. Configure SIMPLE_IDENTITY_SERVER_CORS_ALLOWED_ORIGINS with your actual domains
# 3. Set up proper SSL certificates (not self-signed)
# 4. Configure external secret management if available
# 5. Set up monitoring and alerting
# 6. Review and test all security configurations
# 7. Ensure database backups are configured
# 8. Set up log aggregation and monitoring
